{"ast":null,"code":"import _classCallCheck from \"/Users/markirishlife/Desktop/development/kenticoKontent/kontent-sample-app-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/markirishlife/Desktop/development/kenticoKontent/kontent-sample-app-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { Client } from '../Client.js';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { initLanguageCodeObject, defaultLanguage } from '../Utilities/LanguageCodes';\nimport { spinnerService } from '@simply007org/react-spinners';\n\nvar _unsubscribe = new Subject();\n\nvar changeListeners = [];\n\nvar resetStore = function resetStore() {\n  return {\n    home: initLanguageCodeObject()\n  };\n};\n\nvar _resetStore = resetStore(),\n    home = _resetStore.home;\n\nvar notifyChange = function notifyChange() {\n  changeListeners.forEach(function (listener) {\n    listener();\n  });\n};\n\nvar fetchHome = function fetchHome(language) {\n  var query = Client.items().type('home');\n\n  if (language) {\n    query.languageParameter(language);\n  }\n\n  query.toObservable().pipe(takeUntil(_unsubscribe)).subscribe(function (response) {\n    if (language) {\n      home[language] = response.items[0];\n    } else {\n      home[defaultLanguage] = response.items[0];\n    }\n\n    notifyChange();\n  });\n};\n\nvar Home =\n/*#__PURE__*/\nfunction () {\n  function Home() {\n    _classCallCheck(this, Home);\n  }\n\n  _createClass(Home, [{\n    key: \"provideHome\",\n    // Actions\n    value: function provideHome(language, urlSlug) {\n      if (spinnerService.isShowing('apiSpinner') === false) {\n        spinnerService.show('apiSpinner');\n      }\n\n      fetchHome(language, urlSlug);\n    } // Methods\n\n  }, {\n    key: \"getHome\",\n    value: function getHome(language) {\n      spinnerService.hide('apiSpinner');\n      return home[language];\n    } // Listeners\n\n  }, {\n    key: \"addChangeListener\",\n    value: function addChangeListener(listener) {\n      changeListeners.push(listener);\n    }\n  }, {\n    key: \"removeChangeListener\",\n    value: function removeChangeListener(listener) {\n      changeListeners = changeListeners.filter(function (element) {\n        return element !== listener;\n      });\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe() {\n      _unsubscribe.next();\n\n      _unsubscribe.complete();\n\n      _unsubscribe = new Subject();\n    }\n  }]);\n\n  return Home;\n}();\n\nvar HomeStore = new Home();\nexport { HomeStore, resetStore };","map":{"version":3,"sources":["/Users/markirishlife/Desktop/development/kenticoKontent/kontent-sample-app-react/src/Stores/Home.js"],"names":["Client","takeUntil","Subject","initLanguageCodeObject","defaultLanguage","spinnerService","unsubscribe","changeListeners","resetStore","home","notifyChange","forEach","listener","fetchHome","language","query","items","type","languageParameter","toObservable","pipe","subscribe","response","Home","urlSlug","isShowing","show","hide","push","filter","element","next","complete","HomeStore"],"mappings":";;AAAA,SAASA,MAAT,QAAuB,cAAvB;AACA,SAASC,SAAT,QAA0B,gBAA1B;AACA,SAASC,OAAT,QAAwB,MAAxB;AACA,SACEC,sBADF,EAEEC,eAFF,QAGO,4BAHP;AAIA,SAASC,cAAT,QAA+B,8BAA/B;;AAEA,IAAIC,YAAW,GAAG,IAAIJ,OAAJ,EAAlB;;AACA,IAAIK,eAAe,GAAG,EAAtB;;AACA,IAAMC,UAAU,GAAG,SAAbA,UAAa;AAAA,SAAO;AACxBC,IAAAA,IAAI,EAAEN,sBAAsB;AADJ,GAAP;AAAA,CAAnB;;kBAGeK,UAAU,E;IAAnBC,I,eAAAA,I;;AAEN,IAAIC,YAAY,GAAG,SAAfA,YAAe,GAAM;AACvBH,EAAAA,eAAe,CAACI,OAAhB,CAAwB,UAAAC,QAAQ,EAAI;AAClCA,IAAAA,QAAQ;AACT,GAFD;AAGD,CAJD;;AAMA,IAAIC,SAAS,GAAG,SAAZA,SAAY,CAAAC,QAAQ,EAAI;AAC1B,MAAIC,KAAK,GAAGf,MAAM,CAACgB,KAAP,GAAeC,IAAf,CAAoB,MAApB,CAAZ;;AAEA,MAAIH,QAAJ,EAAc;AACZC,IAAAA,KAAK,CAACG,iBAAN,CAAwBJ,QAAxB;AACD;;AAEDC,EAAAA,KAAK,CACFI,YADH,GAEGC,IAFH,CAEQnB,SAAS,CAACK,YAAD,CAFjB,EAGGe,SAHH,CAGa,UAAAC,QAAQ,EAAI;AACrB,QAAIR,QAAJ,EAAc;AACZL,MAAAA,IAAI,CAACK,QAAD,CAAJ,GAAiBQ,QAAQ,CAACN,KAAT,CAAe,CAAf,CAAjB;AACD,KAFD,MAEO;AACLP,MAAAA,IAAI,CAACL,eAAD,CAAJ,GAAwBkB,QAAQ,CAACN,KAAT,CAAe,CAAf,CAAxB;AACD;;AACDN,IAAAA,YAAY;AACb,GAVH;AAWD,CAlBD;;IAoBMa,I;;;;;;;;;AACJ;gCAEYT,Q,EAAUU,O,EAAS;AAC7B,UAAInB,cAAc,CAACoB,SAAf,CAAyB,YAAzB,MAA2C,KAA/C,EAAsD;AACpDpB,QAAAA,cAAc,CAACqB,IAAf,CAAoB,YAApB;AACD;;AACDb,MAAAA,SAAS,CAACC,QAAD,EAAWU,OAAX,CAAT;AACD,K,CAED;;;;4BAEQV,Q,EAAU;AAChBT,MAAAA,cAAc,CAACsB,IAAf,CAAoB,YAApB;AACA,aAAOlB,IAAI,CAACK,QAAD,CAAX;AACD,K,CAED;;;;sCAEkBF,Q,EAAU;AAC1BL,MAAAA,eAAe,CAACqB,IAAhB,CAAqBhB,QAArB;AACD;;;yCAEoBA,Q,EAAU;AAC7BL,MAAAA,eAAe,GAAGA,eAAe,CAACsB,MAAhB,CAAuB,UAAAC,OAAO,EAAI;AAClD,eAAOA,OAAO,KAAKlB,QAAnB;AACD,OAFiB,CAAlB;AAGD;;;kCAEa;AACZN,MAAAA,YAAW,CAACyB,IAAZ;;AACAzB,MAAAA,YAAW,CAAC0B,QAAZ;;AACA1B,MAAAA,YAAW,GAAG,IAAIJ,OAAJ,EAAd;AACD;;;;;;AAGH,IAAI+B,SAAS,GAAG,IAAIV,IAAJ,EAAhB;AAEA,SAASU,SAAT,EAAoBzB,UAApB","sourcesContent":["import { Client } from '../Client.js';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport {\n  initLanguageCodeObject,\n  defaultLanguage\n} from '../Utilities/LanguageCodes';\nimport { spinnerService } from '@simply007org/react-spinners';\n\nlet unsubscribe = new Subject();\nlet changeListeners = [];\nconst resetStore = () => ({\n  home: initLanguageCodeObject()\n});\nlet { home } = resetStore();\n\nlet notifyChange = () => {\n  changeListeners.forEach(listener => {\n    listener();\n  });\n};\n\nlet fetchHome = language => {\n  let query = Client.items().type('home');\n\n  if (language) {\n    query.languageParameter(language);\n  }\n\n  query\n    .toObservable()\n    .pipe(takeUntil(unsubscribe))\n    .subscribe(response => {\n      if (language) {\n        home[language] = response.items[0];\n      } else {\n        home[defaultLanguage] = response.items[0];\n      }\n      notifyChange();\n    });\n};\n\nclass Home {\n  // Actions\n\n  provideHome(language, urlSlug) {\n    if (spinnerService.isShowing('apiSpinner') === false) {\n      spinnerService.show('apiSpinner');\n    }\n    fetchHome(language, urlSlug);\n  }\n\n  // Methods\n\n  getHome(language) {\n    spinnerService.hide('apiSpinner');\n    return home[language];\n  }\n\n  // Listeners\n\n  addChangeListener(listener) {\n    changeListeners.push(listener);\n  }\n\n  removeChangeListener(listener) {\n    changeListeners = changeListeners.filter(element => {\n      return element !== listener;\n    });\n  }\n\n  unsubscribe() {\n    unsubscribe.next();\n    unsubscribe.complete();\n    unsubscribe = new Subject();\n  }\n}\n\nlet HomeStore = new Home();\n\nexport { HomeStore, resetStore };\n"]},"metadata":{},"sourceType":"module"}