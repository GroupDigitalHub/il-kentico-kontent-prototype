{"ast":null,"code":"import _classCallCheck from \"/Users/markirishlife/Desktop/development/kenticoKontent/kontent-sample-app-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/markirishlife/Desktop/development/kenticoKontent/kontent-sample-app-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { Client } from '../Client.js';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { initLanguageCodeObject, defaultLanguage } from '../Utilities/LanguageCodes';\nimport { spinnerService } from '@simply007org/react-spinners';\n\nvar _unsubscribe = new Subject();\n\nvar changeListeners = [];\n\nvar resetStore = function resetStore() {\n  return {\n    coffees: initLanguageCodeObject(),\n    processings: [],\n    productStatuses: []\n  };\n};\n\nvar _resetStore = resetStore(),\n    coffees = _resetStore.coffees,\n    processings = _resetStore.processings,\n    productStatuses = _resetStore.productStatuses;\n\nvar notifyChange = function notifyChange() {\n  changeListeners.forEach(function (listener) {\n    listener();\n  });\n};\n\nvar fetchCoffees = function fetchCoffees(language) {\n  var query = Client.items().type('coffee').orderParameter('elements.product_name');\n\n  if (language) {\n    query.languageParameter(language);\n  }\n\n  query.toObservable().pipe(takeUntil(_unsubscribe)).subscribe(function (response) {\n    if (language) {\n      coffees[language] = response.items;\n    } else {\n      coffees[defaultLanguage] = response.items;\n    }\n\n    notifyChange();\n  });\n};\n\nvar fetchProcessings = function fetchProcessings() {\n  Client.taxonomy('processing').toObservable().pipe(takeUntil(_unsubscribe)).subscribe(function (response) {\n    processings = response.taxonomy.terms;\n    notifyChange();\n  });\n};\n\nvar fetchProductStatuses = function fetchProductStatuses() {\n  Client.taxonomy('product_status').toObservable().pipe(takeUntil(_unsubscribe)).subscribe(function (response) {\n    productStatuses = response.taxonomy.terms;\n    notifyChange();\n  });\n};\n\nexport var Filter =\n/*#__PURE__*/\nfunction () {\n  function Filter() {\n    _classCallCheck(this, Filter);\n\n    this.processings = [];\n    this.productStatuses = [];\n  }\n\n  _createClass(Filter, [{\n    key: \"matches\",\n    value: function matches(coffee) {\n      return this.matchesProcessings(coffee) && this.matchesProductStatuses(coffee);\n    }\n  }, {\n    key: \"matchesProcessings\",\n    value: function matchesProcessings(coffee) {\n      if (this.processings.length === 0) {\n        return true;\n      }\n\n      var processings = coffee.processing.value.map(function (x) {\n        return x.codename;\n      });\n      return this.processings.some(function (x) {\n        return processings.includes(x);\n      });\n    }\n  }, {\n    key: \"matchesProductStatuses\",\n    value: function matchesProductStatuses(coffee) {\n      if (this.productStatuses.length === 0) {\n        return true;\n      }\n\n      var statuses = coffee.productStatus.value.map(function (x) {\n        return x.codename;\n      });\n      return this.productStatuses.some(function (x) {\n        return statuses.includes(x);\n      });\n    }\n  }, {\n    key: \"toggleProcessing\",\n    value: function toggleProcessing(processing) {\n      var index = this.processings.indexOf(processing);\n      if (index < 0) this.processings.push(processing);else this.processings.splice(index, 1);\n    }\n  }, {\n    key: \"toggleProductStatus\",\n    value: function toggleProductStatus(status) {\n      var index = this.productStatuses.indexOf(status);\n      if (index < 0) this.productStatuses.push(status);else this.productStatuses.splice(index, 1);\n    }\n  }]);\n\n  return Filter;\n}();\nvar coffeeFilter = new Filter();\n\nvar Coffee =\n/*#__PURE__*/\nfunction () {\n  function Coffee() {\n    _classCallCheck(this, Coffee);\n  }\n\n  _createClass(Coffee, [{\n    key: \"provideCoffee\",\n    // Actions\n    value: function provideCoffee(language) {\n      if (spinnerService.isShowing('apiSpinner') === false) {\n        spinnerService.show('apiSpinner');\n      }\n\n      fetchCoffees(language);\n    }\n  }, {\n    key: \"provideCoffees\",\n    value: function provideCoffees(language) {\n      if (spinnerService.isShowing('apiSpinner') === false) {\n        spinnerService.show('apiSpinner');\n      }\n\n      fetchCoffees(language);\n    }\n  }, {\n    key: \"provideProcessings\",\n    value: function provideProcessings() {\n      if (spinnerService.isShowing('apiSpinner') === false) {\n        spinnerService.show('apiSpinner');\n      }\n\n      fetchProcessings();\n    }\n  }, {\n    key: \"provideProductStatuses\",\n    value: function provideProductStatuses() {\n      if (spinnerService.isShowing('apiSpinner') === false) {\n        spinnerService.show('apiSpinner');\n      }\n\n      fetchProductStatuses();\n    } // Methods\n\n  }, {\n    key: \"getCoffee\",\n    value: function getCoffee(coffeeSlug, language) {\n      spinnerService.hide('apiSpinner');\n      return coffees[language || defaultLanguage].find(function (coffee) {\n        return coffee.urlPattern.value === coffeeSlug;\n      });\n    }\n  }, {\n    key: \"getCoffees\",\n    value: function getCoffees(language) {\n      spinnerService.hide('apiSpinner');\n      return coffees[language];\n    }\n  }, {\n    key: \"getProcessings\",\n    value: function getProcessings() {\n      spinnerService.hide('apiSpinner');\n      return processings;\n    }\n  }, {\n    key: \"getProductStatuses\",\n    value: function getProductStatuses() {\n      spinnerService.hide('apiSpinner');\n      return productStatuses;\n    }\n  }, {\n    key: \"getFilter\",\n    value: function getFilter() {\n      return coffeeFilter;\n    }\n  }, {\n    key: \"setFilter\",\n    value: function setFilter(filter) {\n      coffeeFilter = filter;\n      notifyChange();\n    } // Listeners\n\n  }, {\n    key: \"addChangeListener\",\n    value: function addChangeListener(listener) {\n      changeListeners.push(listener);\n    }\n  }, {\n    key: \"removeChangeListener\",\n    value: function removeChangeListener(listener) {\n      changeListeners = changeListeners.filter(function (element) {\n        return element !== listener;\n      });\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe() {\n      _unsubscribe.next();\n\n      _unsubscribe.complete();\n\n      _unsubscribe = new Subject();\n    }\n  }]);\n\n  return Coffee;\n}();\n\nvar CoffeeStore = new Coffee();\nexport { CoffeeStore, resetStore };","map":{"version":3,"sources":["/Users/markirishlife/Desktop/development/kenticoKontent/kontent-sample-app-react/src/Stores/Coffee.js"],"names":["Client","takeUntil","Subject","initLanguageCodeObject","defaultLanguage","spinnerService","unsubscribe","changeListeners","resetStore","coffees","processings","productStatuses","notifyChange","forEach","listener","fetchCoffees","language","query","items","type","orderParameter","languageParameter","toObservable","pipe","subscribe","response","fetchProcessings","taxonomy","terms","fetchProductStatuses","Filter","coffee","matchesProcessings","matchesProductStatuses","length","processing","value","map","x","codename","some","includes","statuses","productStatus","index","indexOf","push","splice","status","coffeeFilter","Coffee","isShowing","show","coffeeSlug","hide","find","urlPattern","filter","element","next","complete","CoffeeStore"],"mappings":"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","sourcesContent":["import { Client } from '../Client.js';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport {\n  initLanguageCodeObject,\n  defaultLanguage\n} from '../Utilities/LanguageCodes';\nimport { spinnerService } from '@simply007org/react-spinners';\n\nlet unsubscribe = new Subject();\nlet changeListeners = [];\nconst resetStore = () => ({\n  coffees: initLanguageCodeObject(),\n  processings: [],\n  productStatuses: []\n});\nlet { coffees, processings, productStatuses } = resetStore();\n\nlet notifyChange = () => {\n  changeListeners.forEach(listener => {\n    listener();\n  });\n};\n\nlet fetchCoffees = language => {\n  var query = Client.items()\n    .type('coffee')\n    .orderParameter('elements.product_name');\n\n  if (language) {\n    query.languageParameter(language);\n  }\n\n  query\n    .toObservable()\n    .pipe(takeUntil(unsubscribe))\n    .subscribe(response => {\n      if (language) {\n        coffees[language] = response.items;\n      } else {\n        coffees[defaultLanguage] = response.items;\n      }\n      notifyChange();\n    });\n};\n\nlet fetchProcessings = () => {\n  Client.taxonomy('processing')\n    .toObservable()\n    .pipe(takeUntil(unsubscribe))\n    .subscribe(response => {\n      processings = response.taxonomy.terms;\n      notifyChange();\n    });\n};\n\nlet fetchProductStatuses = () => {\n  Client.taxonomy('product_status')\n    .toObservable()\n    .pipe(takeUntil(unsubscribe))\n    .subscribe(response => {\n      productStatuses = response.taxonomy.terms;\n      notifyChange();\n    });\n};\n\nexport class Filter {\n  constructor() {\n    this.processings = [];\n    this.productStatuses = [];\n  }\n\n  matches(coffee) {\n    return (\n      this.matchesProcessings(coffee) && this.matchesProductStatuses(coffee)\n    );\n  }\n\n  matchesProcessings(coffee) {\n    if (this.processings.length === 0) {\n      return true;\n    }\n\n    let processings = coffee.processing.value.map(x => x.codename);\n\n    return this.processings.some(x => processings.includes(x));\n  }\n\n  matchesProductStatuses(coffee) {\n    if (this.productStatuses.length === 0) {\n      return true;\n    }\n\n    let statuses = coffee.productStatus.value.map(x => x.codename);\n\n    return this.productStatuses.some(x => statuses.includes(x));\n  }\n\n  toggleProcessing(processing) {\n    let index = this.processings.indexOf(processing);\n\n    if (index < 0) this.processings.push(processing);\n    else this.processings.splice(index, 1);\n  }\n\n  toggleProductStatus(status) {\n    let index = this.productStatuses.indexOf(status);\n\n    if (index < 0) this.productStatuses.push(status);\n    else this.productStatuses.splice(index, 1);\n  }\n}\n\nlet coffeeFilter = new Filter();\n\nclass Coffee {\n  // Actions\n\n  provideCoffee(language) {\n    if (spinnerService.isShowing('apiSpinner') === false) {\n      spinnerService.show('apiSpinner');\n    }\n    fetchCoffees(language);\n  }\n\n  provideCoffees(language) {\n    if (spinnerService.isShowing('apiSpinner') === false) {\n      spinnerService.show('apiSpinner');\n    }\n    fetchCoffees(language);\n  }\n\n  provideProcessings() {\n    if (spinnerService.isShowing('apiSpinner') === false) {\n      spinnerService.show('apiSpinner');\n    }\n    fetchProcessings();\n  }\n\n  provideProductStatuses() {\n    if (spinnerService.isShowing('apiSpinner') === false) {\n      spinnerService.show('apiSpinner');\n    }\n    fetchProductStatuses();\n  }\n\n  // Methods\n\n  getCoffee(coffeeSlug, language) {\n    spinnerService.hide('apiSpinner');\n    return coffees[language || defaultLanguage].find(\n      coffee => coffee.urlPattern.value === coffeeSlug\n    );\n  }\n\n  getCoffees(language) {\n    spinnerService.hide('apiSpinner');\n    return coffees[language];\n  }\n\n  getProcessings() {\n    spinnerService.hide('apiSpinner');\n    return processings;\n  }\n\n  getProductStatuses() {\n    spinnerService.hide('apiSpinner');\n    return productStatuses;\n  }\n\n  getFilter() {\n    return coffeeFilter;\n  }\n\n  setFilter(filter) {\n    coffeeFilter = filter;\n    notifyChange();\n  }\n\n  // Listeners\n\n  addChangeListener(listener) {\n    changeListeners.push(listener);\n  }\n\n  removeChangeListener(listener) {\n    changeListeners = changeListeners.filter(element => {\n      return element !== listener;\n    });\n  }\n\n  unsubscribe() {\n    unsubscribe.next();\n    unsubscribe.complete();\n    unsubscribe = new Subject();\n  }\n}\n\nlet CoffeeStore = new Coffee();\n\nexport { CoffeeStore, resetStore };\n"]},"metadata":{},"sourceType":"module"}