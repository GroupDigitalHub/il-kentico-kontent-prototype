{"ast":null,"code":"import _classCallCheck from \"/Users/markirishlife/Desktop/development/kenticoKontent/kontent-sample-app-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/markirishlife/Desktop/development/kenticoKontent/kontent-sample-app-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { Client } from '../Client.js';\nimport { SortOrder } from '@kentico/kontent-delivery';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { initLanguageCodeObject, defaultLanguage } from '../Utilities/LanguageCodes';\nimport { spinnerService } from '@simply007org/react-spinners';\n\nvar _unsubscribe = new Subject();\n\nvar resetStore = function resetStore() {\n  return {\n    articleList: initLanguageCodeObject(),\n    articleDetails: initLanguageCodeObject()\n  };\n};\n\nvar _resetStore = resetStore(),\n    articleList = _resetStore.articleList,\n    articleDetails = _resetStore.articleDetails;\n\nvar changeListeners = [];\n\nvar notifyChange = function notifyChange() {\n  changeListeners.forEach(function (listener) {\n    listener();\n  });\n};\n\nvar Article =\n/*#__PURE__*/\nfunction () {\n  function Article() {\n    _classCallCheck(this, Article);\n  }\n\n  _createClass(Article, [{\n    key: \"provideArticle\",\n    // Actions\n    value: function provideArticle(articleId, language) {\n      var query = Client.items().type('article').equalsFilter('system.id', articleId).elementsParameter(['title', 'teaser_image', 'post_date', 'body_copy', 'video_host', 'video_id', 'tweet_link', 'theme', 'display_options', 'metadata__meta_title', 'metadata__meta_description', 'metadata__og_title', 'metadata__og_description', 'metadata__og_image', 'metadata__twitter_title', 'metadata__twitter_site', 'metadata__twitter_creator', 'metadata__twitter_description', 'metadata__twitter_image']);\n\n      if (language) {\n        query.languageParameter(language);\n      }\n\n      if (spinnerService.isShowing('apiSpinner') === false) {\n        spinnerService.show('apiSpinner');\n      }\n\n      query.toObservable().pipe(takeUntil(_unsubscribe)).subscribe(function (response) {\n        if (!response.isEmpty) {\n          if (language) {\n            articleDetails[language][articleId] = response.items[0];\n          } else {\n            articleDetails[defaultLanguage][articleId] = response.items[0];\n          }\n\n          notifyChange();\n        }\n      });\n    }\n  }, {\n    key: \"provideArticles\",\n    value: function provideArticles(language) {\n      var query = Client.items().type('article').orderParameter('elements.post_date', SortOrder.desc);\n\n      if (language) {\n        query.languageParameter(language);\n      }\n\n      if (spinnerService.isShowing('apiSpinner') === false) {\n        spinnerService.show('apiSpinner');\n      }\n\n      query.toObservable().pipe(takeUntil(_unsubscribe)).subscribe(function (response) {\n        if (language) {\n          articleList[language] = response.items;\n        } else {\n          articleList[defaultLanguage] = response.items;\n        }\n\n        notifyChange();\n      });\n    } // Methods\n\n  }, {\n    key: \"getArticle\",\n    value: function getArticle(articleId, language) {\n      spinnerService.hide('apiSpinner');\n\n      if (language) {\n        return articleDetails[language][articleId];\n      } else {\n        return articleDetails[defaultLanguage][articleId];\n      }\n    }\n  }, {\n    key: \"getArticles\",\n    value: function getArticles(count, language) {\n      spinnerService.hide('apiSpinner');\n\n      if (language) {\n        return articleList[language].slice(0, count);\n      } else {\n        return articleList[defaultLanguage].slice(0, count);\n      }\n    } // Listeners\n\n  }, {\n    key: \"addChangeListener\",\n    value: function addChangeListener(listener) {\n      changeListeners.push(listener);\n    }\n  }, {\n    key: \"removeChangeListener\",\n    value: function removeChangeListener(listener) {\n      changeListeners = changeListeners.filter(function (element) {\n        return element !== listener;\n      });\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe() {\n      _unsubscribe.next();\n\n      _unsubscribe.complete();\n\n      _unsubscribe = new Subject();\n    }\n  }]);\n\n  return Article;\n}();\n\nvar ArticleStore = new Article();\nexport { ArticleStore, resetStore };","map":{"version":3,"sources":["/Users/markirishlife/Desktop/development/kenticoKontent/kontent-sample-app-react/src/Stores/Article.js"],"names":["Client","SortOrder","takeUntil","Subject","initLanguageCodeObject","defaultLanguage","spinnerService","unsubscribe","resetStore","articleList","articleDetails","changeListeners","notifyChange","forEach","listener","Article","articleId","language","query","items","type","equalsFilter","elementsParameter","languageParameter","isShowing","show","toObservable","pipe","subscribe","response","isEmpty","orderParameter","desc","hide","count","slice","push","filter","element","next","complete","ArticleStore"],"mappings":";;AAAA,SAASA,MAAT,QAAuB,cAAvB;AACA,SAASC,SAAT,QAA0B,2BAA1B;AACA,SAASC,SAAT,QAA0B,gBAA1B;AACA,SAASC,OAAT,QAAwB,MAAxB;AACA,SACEC,sBADF,EAEEC,eAFF,QAGO,4BAHP;AAIA,SAASC,cAAT,QAA+B,8BAA/B;;AAEA,IAAIC,YAAW,GAAG,IAAIJ,OAAJ,EAAlB;;AACA,IAAMK,UAAU,GAAG,SAAbA,UAAa;AAAA,SAAO;AACxBC,IAAAA,WAAW,EAAEL,sBAAsB,EADX;AAExBM,IAAAA,cAAc,EAAEN,sBAAsB;AAFd,GAAP;AAAA,CAAnB;;kBAIsCI,UAAU,E;IAA1CC,W,eAAAA,W;IAAaC,c,eAAAA,c;;AAEnB,IAAIC,eAAe,GAAG,EAAtB;;AAEA,IAAIC,YAAY,GAAG,SAAfA,YAAe,GAAM;AACvBD,EAAAA,eAAe,CAACE,OAAhB,CAAwB,UAAAC,QAAQ,EAAI;AAClCA,IAAAA,QAAQ;AACT,GAFD;AAGD,CAJD;;IAMMC,O;;;;;;;;;AACJ;mCAEeC,S,EAAWC,Q,EAAU;AAClC,UAAIC,KAAK,GAAGlB,MAAM,CAACmB,KAAP,GACTC,IADS,CACJ,SADI,EAETC,YAFS,CAEI,WAFJ,EAEiBL,SAFjB,EAGTM,iBAHS,CAGS,CACjB,OADiB,EAEjB,cAFiB,EAGjB,WAHiB,EAIjB,WAJiB,EAKjB,YALiB,EAMjB,UANiB,EAOjB,YAPiB,EAQjB,OARiB,EASjB,iBATiB,EAUjB,sBAViB,EAWjB,4BAXiB,EAYjB,oBAZiB,EAajB,0BAbiB,EAcjB,oBAdiB,EAejB,yBAfiB,EAgBjB,wBAhBiB,EAiBjB,2BAjBiB,EAkBjB,+BAlBiB,EAmBjB,yBAnBiB,CAHT,CAAZ;;AAyBA,UAAIL,QAAJ,EAAc;AACZC,QAAAA,KAAK,CAACK,iBAAN,CAAwBN,QAAxB;AACD;;AAED,UAAIX,cAAc,CAACkB,SAAf,CAAyB,YAAzB,MAA2C,KAA/C,EAAsD;AACpDlB,QAAAA,cAAc,CAACmB,IAAf,CAAoB,YAApB;AACD;;AAEDP,MAAAA,KAAK,CACFQ,YADH,GAEGC,IAFH,CAEQzB,SAAS,CAACK,YAAD,CAFjB,EAGGqB,SAHH,CAGa,UAAAC,QAAQ,EAAI;AACrB,YAAI,CAACA,QAAQ,CAACC,OAAd,EAAuB;AACrB,cAAIb,QAAJ,EAAc;AACZP,YAAAA,cAAc,CAACO,QAAD,CAAd,CAAyBD,SAAzB,IAAsCa,QAAQ,CAACV,KAAT,CAAe,CAAf,CAAtC;AACD,WAFD,MAEO;AACLT,YAAAA,cAAc,CAACL,eAAD,CAAd,CAAgCW,SAAhC,IAA6Ca,QAAQ,CAACV,KAAT,CAAe,CAAf,CAA7C;AACD;;AACDP,UAAAA,YAAY;AACb;AACF,OAZH;AAaD;;;oCAEeK,Q,EAAU;AACxB,UAAIC,KAAK,GAAGlB,MAAM,CAACmB,KAAP,GACTC,IADS,CACJ,SADI,EAETW,cAFS,CAEM,oBAFN,EAE4B9B,SAAS,CAAC+B,IAFtC,CAAZ;;AAIA,UAAIf,QAAJ,EAAc;AACZC,QAAAA,KAAK,CAACK,iBAAN,CAAwBN,QAAxB;AACD;;AAED,UAAIX,cAAc,CAACkB,SAAf,CAAyB,YAAzB,MAA2C,KAA/C,EAAsD;AACpDlB,QAAAA,cAAc,CAACmB,IAAf,CAAoB,YAApB;AACD;;AAEDP,MAAAA,KAAK,CACFQ,YADH,GAEGC,IAFH,CAEQzB,SAAS,CAACK,YAAD,CAFjB,EAGGqB,SAHH,CAGa,UAAAC,QAAQ,EAAI;AACrB,YAAIZ,QAAJ,EAAc;AACZR,UAAAA,WAAW,CAACQ,QAAD,CAAX,GAAwBY,QAAQ,CAACV,KAAjC;AACD,SAFD,MAEO;AACLV,UAAAA,WAAW,CAACJ,eAAD,CAAX,GAA+BwB,QAAQ,CAACV,KAAxC;AACD;;AACDP,QAAAA,YAAY;AACb,OAVH;AAWD,K,CAED;;;;+BACWI,S,EAAWC,Q,EAAU;AAC9BX,MAAAA,cAAc,CAAC2B,IAAf,CAAoB,YAApB;;AACA,UAAIhB,QAAJ,EAAc;AACZ,eAAOP,cAAc,CAACO,QAAD,CAAd,CAAyBD,SAAzB,CAAP;AACD,OAFD,MAEO;AACL,eAAON,cAAc,CAACL,eAAD,CAAd,CAAgCW,SAAhC,CAAP;AACD;AACF;;;gCAEWkB,K,EAAOjB,Q,EAAU;AAC3BX,MAAAA,cAAc,CAAC2B,IAAf,CAAoB,YAApB;;AACA,UAAIhB,QAAJ,EAAc;AACZ,eAAOR,WAAW,CAACQ,QAAD,CAAX,CAAsBkB,KAAtB,CAA4B,CAA5B,EAA+BD,KAA/B,CAAP;AACD,OAFD,MAEO;AACL,eAAOzB,WAAW,CAACJ,eAAD,CAAX,CAA6B8B,KAA7B,CAAmC,CAAnC,EAAsCD,KAAtC,CAAP;AACD;AACF,K,CAED;;;;sCACkBpB,Q,EAAU;AAC1BH,MAAAA,eAAe,CAACyB,IAAhB,CAAqBtB,QAArB;AACD;;;yCAEoBA,Q,EAAU;AAC7BH,MAAAA,eAAe,GAAGA,eAAe,CAAC0B,MAAhB,CAAuB,UAAAC,OAAO,EAAI;AAClD,eAAOA,OAAO,KAAKxB,QAAnB;AACD,OAFiB,CAAlB;AAGD;;;kCAEa;AACZP,MAAAA,YAAW,CAACgC,IAAZ;;AACAhC,MAAAA,YAAW,CAACiC,QAAZ;;AACAjC,MAAAA,YAAW,GAAG,IAAIJ,OAAJ,EAAd;AACD;;;;;;AAGH,IAAIsC,YAAY,GAAG,IAAI1B,OAAJ,EAAnB;AAEA,SAAS0B,YAAT,EAAuBjC,UAAvB","sourcesContent":["import { Client } from '../Client.js';\nimport { SortOrder } from '@kentico/kontent-delivery';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport {\n  initLanguageCodeObject,\n  defaultLanguage\n} from '../Utilities/LanguageCodes';\nimport { spinnerService } from '@simply007org/react-spinners';\n\nlet unsubscribe = new Subject();\nconst resetStore = () => ({\n  articleList: initLanguageCodeObject(),\n  articleDetails: initLanguageCodeObject()\n});\nlet { articleList, articleDetails } = resetStore();\n\nlet changeListeners = [];\n\nlet notifyChange = () => {\n  changeListeners.forEach(listener => {\n    listener();\n  });\n};\n\nclass Article {\n  // Actions\n\n  provideArticle(articleId, language) {\n    let query = Client.items()\n      .type('article')\n      .equalsFilter('system.id', articleId)\n      .elementsParameter([\n        'title',\n        'teaser_image',\n        'post_date',\n        'body_copy',\n        'video_host',\n        'video_id',\n        'tweet_link',\n        'theme',\n        'display_options',\n        'metadata__meta_title',\n        'metadata__meta_description',\n        'metadata__og_title',\n        'metadata__og_description',\n        'metadata__og_image',\n        'metadata__twitter_title',\n        'metadata__twitter_site',\n        'metadata__twitter_creator',\n        'metadata__twitter_description',\n        'metadata__twitter_image'\n      ]);\n\n    if (language) {\n      query.languageParameter(language);\n    }\n\n    if (spinnerService.isShowing('apiSpinner') === false) {\n      spinnerService.show('apiSpinner');\n    }\n\n    query\n      .toObservable()\n      .pipe(takeUntil(unsubscribe))\n      .subscribe(response => {\n        if (!response.isEmpty) {\n          if (language) {\n            articleDetails[language][articleId] = response.items[0];\n          } else {\n            articleDetails[defaultLanguage][articleId] = response.items[0];\n          }\n          notifyChange();\n        }\n      });\n  }\n\n  provideArticles(language) {\n    let query = Client.items()\n      .type('article')\n      .orderParameter('elements.post_date', SortOrder.desc);\n\n    if (language) {\n      query.languageParameter(language);\n    }\n\n    if (spinnerService.isShowing('apiSpinner') === false) {\n      spinnerService.show('apiSpinner');\n    }\n\n    query\n      .toObservable()\n      .pipe(takeUntil(unsubscribe))\n      .subscribe(response => {\n        if (language) {\n          articleList[language] = response.items;\n        } else {\n          articleList[defaultLanguage] = response.items;\n        }\n        notifyChange();\n      });\n  }\n\n  // Methods\n  getArticle(articleId, language) {\n    spinnerService.hide('apiSpinner');\n    if (language) {\n      return articleDetails[language][articleId];\n    } else {\n      return articleDetails[defaultLanguage][articleId];\n    }\n  }\n\n  getArticles(count, language) {\n    spinnerService.hide('apiSpinner');\n    if (language) {\n      return articleList[language].slice(0, count);\n    } else {\n      return articleList[defaultLanguage].slice(0, count);\n    }\n  }\n\n  // Listeners\n  addChangeListener(listener) {\n    changeListeners.push(listener);\n  }\n\n  removeChangeListener(listener) {\n    changeListeners = changeListeners.filter(element => {\n      return element !== listener;\n    });\n  }\n\n  unsubscribe() {\n    unsubscribe.next();\n    unsubscribe.complete();\n    unsubscribe = new Subject();\n  }\n}\n\nlet ArticleStore = new Article();\n\nexport { ArticleStore, resetStore };\n"]},"metadata":{},"sourceType":"module"}